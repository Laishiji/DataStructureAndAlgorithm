# 2-3树与红黑树
## 2-3树
2-3树也满足二分搜索树的性质，且：
1. 有两种节点，一种存放一个元素有两个孩子（2-节点），一种存放两个元素有三个孩子（3-节点），比如：
     ```
                 42
               /    \
           17,33     50
          /  | \     / \
       6,12 18  37  48  66,88 
     ```
2. 2-3树是**绝对平衡**的：任意一个节点的左右子树高度相等。
3. 一棵空2-3树添加元素的过程如下：
     ```
          37         12     M              18        6       M           M                  11             5
      42  =>  37,42  =>  12,37,42  =>  37  =>   37   =>     37    =>    37    =>   12,37    =>    12,27    => 
                                      /  \     /  \        /  \        /  \        / | \         /  |  \
                                     12  42  12,18 42  6,12,18 42     12   42     6  18 42     6,11 18  42
                                                                     /  \   
                                                                    6    18 
             M                M                 M
           12,37       =>   12,37      =>     6,12,37      =>     12     ......
         /   |   \         /  |   \         /  |  |  \           /  \
      5,6,11 18   42      6   18   42      5   11 18  42        6    37
                         / \                                   / \   / \  
                        5   11                                5  11  18 42
   
     ```
     2-3树添加节点永远不会添加到空的位置。上图中**M**表示当前2-3树的中间状态。
     1. 若插入2-节点，则直接融合变为3-节点；
     2. 若插入3-节点可分为如下3种情况：
        1. 3-节点是根节点，则临时形成4-节点，再变形为3个2-节点即可；
        2. 3-节点是叶子节点且其父亲节点是2-节点，则临时形成4-节点，接着变形为3个2-节点的子树，然后子树的根节点向上融合；
        3. 3-节点是叶子节点且其父亲节点也是3-节点，则临时形成4-节点，接着变形为3个2-节点的子树，然后子树的根节点向上融合，向上融合形成的4-节点最后变形为3个2-节点的子树。

## 2-3树与红黑树的等价性
1. 任何一棵2-3树都可以转化为一棵红黑树。 
2. 2-节点 <==> 黑色节点
3. 3-节点 <==> **黑色节点与其左孩子红色节点**。由此可知，所有的红色节点都是向左倾斜的。
4. 举例：
    ```
                42                                     42
              /    \             等价               /      \
          17,33     50           <==>             33        50
         /  | \     / \                         /   \      /   \    
      6,12 18  37  48  66,88                 17(Red) 37   48    88
                                             /   \             /
                                            12    18         66(Red)
                                           /
                                          6(Red)
    ```
   
## 红黑树
红黑树也是一棵二分搜索树，其在BST的基础上添加了如下性质，以避免其退化为链表。由2-3树与红黑树的等价性不难得出如下结论：
1. 所有节点非红即黑。
2. 根节点为黑。
3. NULL节点为黑。
4. 红节点的孩子一定为黑。
5. 从任意一个节点到叶子节点，路径上经过的黑色节点数量一样。（由2-3树的绝对平衡性可推出该结论）

**其他结论**
- 由第5条结论可知，红黑树是保持“黑平衡”的二叉树，严格意义上不是平衡二叉树。
- 红黑树牺牲了平衡西，其最大高度是2log(n)，n为节点总数。因此由二分搜索树的特性知，红黑树的查找时间复杂度为O(logn)。
- 红黑树的添加和删除操作快于AVL树，查找慢于AVL树。因此AVL树适用于查询和修改操作较多的情况，而红黑树适用于添加和删除操作较多的情况。
- 以上和2-3树等价的红黑树为左倾红黑树，对于非左倾红黑树，任何不平衡都会在三次旋转内解决。